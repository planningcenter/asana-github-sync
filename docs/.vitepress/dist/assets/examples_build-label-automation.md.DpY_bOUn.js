import{_ as a,c as i,o as t,ag as e}from"./chunks/framework.CA7LwMyB.js";const c=JSON.parse('{"title":"Build Label Automation","description":"","frontmatter":{},"headers":[],"relativePath":"examples/build-label-automation.md","filePath":"examples/build-label-automation.md"}'),n={name:"examples/build-label-automation.md"};function l(p,s,h,o,r,k){return t(),i("div",null,[...s[0]||(s[0]=[e(`<h1 id="build-label-automation" tabindex="-1">Build Label Automation <a class="header-anchor" href="#build-label-automation" aria-label="Permalink to &quot;Build Label Automation&quot;">​</a></h1><p>Extract build information when CI adds labels to PRs.</p><h2 id="use-case" tabindex="-1">Use Case <a class="header-anchor" href="#use-case" aria-label="Permalink to &quot;Use Case&quot;">​</a></h2><p>Your CI system adds a <code>build_created</code> label to PRs when builds complete. Automatically:</p><ol><li>Update Asana when label is added</li><li>Extract build details from PR comments</li><li>Update multiple Asana fields with build info</li></ol><h2 id="complete-workflow" tabindex="-1">Complete Workflow <a class="header-anchor" href="#complete-workflow" aria-label="Permalink to &quot;Complete Workflow&quot;">​</a></h2><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Asana Build Sync</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pull_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    types</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labeled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Only when labels are added</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">jobs</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  sync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    runs-on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ubuntu-latest</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    steps</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">uses</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">planningcenter/asana-github-sync@main</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          asana_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ secrets.ASANA_TOKEN }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          github_token</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\${{ github.token }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">          rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            rules:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              - when:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  event: pull_request</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  action: labeled</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  label: build_created  # Specific label name</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                then:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  update_fields:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &#39;1234567890&#39;: &#39;0987654321&#39;  # Status → &quot;Build Ready&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &#39;1111111111&#39;: &#39;{{extract_from_comments &quot;Build #(\\\\d+)&quot;}}&#39;  # Build Number</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &#39;2222222222&#39;: &#39;{{extract_from_comments &quot;Version: ([\\\\d.]+)&quot;}}&#39;  # Version</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  post_pr_comment: |</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    ✅ Build information updated in Asana</span></span></code></pre></div><h2 id="how-it-works" tabindex="-1">How It Works <a class="header-anchor" href="#how-it-works" aria-label="Permalink to &quot;How It Works&quot;">​</a></h2><ol><li><p><strong>CI Completes Build</strong> - Your CI posts comment and adds label:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Comment: &quot;Build #12345 completed with Version 2.1.0&quot;</span></span>
<span class="line"><span>Label: build_created</span></span></code></pre></div></li><li><p><strong>Workflow Triggers</strong> - On <code>labeled</code> event</p></li><li><p><strong>Action Fetches Comments</strong> - Because <code>extract_from_comments</code> is used, PR comments are automatically fetched</p></li><li><p><strong>Extraction Happens</strong> - Regex patterns pull data:</p><ul><li><code>Build #(\\\\d+)</code> captures <code>12345</code></li><li><code>Version: ([\\\\d.]+)</code> captures <code>2.1.0</code></li></ul></li><li><p><strong>Fields Update</strong> - Asana fields populated with extracted values</p></li></ol><h2 id="key-concepts" tabindex="-1">Key Concepts <a class="header-anchor" href="#key-concepts" aria-label="Permalink to &quot;Key Concepts&quot;">​</a></h2><h3 id="label-condition" tabindex="-1">label Condition <a class="header-anchor" href="#label-condition" aria-label="Permalink to &quot;label Condition&quot;">​</a></h3><p>Matches exact label name:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">build_created</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Must match exactly (case-sensitive)</span></span></code></pre></div><h3 id="extract-from-comments" tabindex="-1">extract_from_comments <a class="header-anchor" href="#extract-from-comments" aria-label="Permalink to &quot;extract_from_comments&quot;">​</a></h3><div class="warning custom-block"><p class="custom-block-title">Important</p><p>Using <code>extract_from_comments</code> <strong>automatically triggers comment fetching</strong>. This is the only time comments are fetched to avoid unnecessary API calls.</p></div><p>Syntax:</p><div class="language-handlebars vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">handlebars</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{{</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">extract_from_comments</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;pattern&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}</span></span></code></pre></div><p>Returns first capture group or empty string.</p><h3 id="regex-patterns" tabindex="-1">Regex Patterns <a class="header-anchor" href="#regex-patterns" aria-label="Permalink to &quot;Regex Patterns&quot;">​</a></h3><table tabindex="0"><thead><tr><th>Pattern</th><th>Matches</th><th>Captures</th></tr></thead><tbody><tr><td><code>Build #(\\\\d+)</code></td><td><code>Build #12345</code></td><td><code>12345</code></td></tr><tr><td><code>Version: ([\\\\d.]+)</code></td><td><code>Version: 2.1.0</code></td><td><code>2.1.0</code></td></tr><tr><td><code>Environment: (\\\\w+)</code></td><td><code>Environment: staging</code></td><td><code>staging</code></td></tr></tbody></table><p><strong>Remember:</strong> Double backslashes in YAML strings.</p><h2 id="expected-behavior" tabindex="-1">Expected Behavior <a class="header-anchor" href="#expected-behavior" aria-label="Permalink to &quot;Expected Behavior&quot;">​</a></h2><p><strong>CI posts comment:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>✅ Build #12345 completed</span></span>
<span class="line"><span>Version: 2.1.0</span></span>
<span class="line"><span>Environment: production</span></span></code></pre></div><p><strong>Then adds label:</strong> <code>build_created</code></p><p><strong>Asana updates:</strong></p><ul><li>Status Field: &quot;Build Ready&quot;</li><li>Build Number: &quot;12345&quot;</li><li>Version: &quot;2.1.0&quot;</li></ul><p><strong>PR comment posted:</strong></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>✅ Build information updated in Asana</span></span>
<span class="line"><span></span></span>
<span class="line"><span>- Build #12345</span></span>
<span class="line"><span>- Version 2.1.0</span></span></code></pre></div><h2 id="variations" tabindex="-1">Variations <a class="header-anchor" href="#variations" aria-label="Permalink to &quot;Variations&quot;">​</a></h2><h3 id="multiple-labels" tabindex="-1">Multiple Labels <a class="header-anchor" href="#multiple-labels" aria-label="Permalink to &quot;Multiple Labels&quot;">​</a></h3><p>Different actions for different labels:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Build created</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pull_request</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labeled</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">build_created</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update_fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;1234567890&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;0987654321&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # &quot;Build Ready&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # Deployed</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pull_request</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labeled</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">deployed</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update_fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;1234567890&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1111111111&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # &quot;Deployed&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      mark_complete</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span></code></pre></div><h3 id="with-fallback-values" tabindex="-1">With Fallback Values <a class="header-anchor" href="#with-fallback-values" aria-label="Permalink to &quot;With Fallback Values&quot;">​</a></h3><p>Use <code>or</code> helper for defaults:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">update_fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;1111111111&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{or (extract_from_comments &quot;Build #(\\\\d+)&quot;) &quot;Unknown&quot;}}&#39;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;2222222222&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{or (extract_from_comments &quot;Version: ([\\\\d.]+)&quot;) &quot;dev&quot;}}&#39;</span></span></code></pre></div><h3 id="only-update-if-extracted" tabindex="-1">Only Update if Extracted <a class="header-anchor" href="#only-update-if-extracted" aria-label="Permalink to &quot;Only Update if Extracted&quot;">​</a></h3><p>Skip update if pattern not found:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">update_fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;1111111111&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{extract_from_comments &quot;Build #(\\\\d+)&quot;}}&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # If pattern doesn&#39;t match, returns empty string → field update skipped</span></span></code></pre></div><h3 id="complex-extraction" tabindex="-1">Complex Extraction <a class="header-anchor" href="#complex-extraction" aria-label="Permalink to &quot;Complex Extraction&quot;">​</a></h3><p>Multiple patterns from same comment:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Comment: &quot;Deploy to production (Build #123, Version 2.1.0)&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">update_fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;1111111111&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{extract_from_comments &quot;Build #(\\\\d+)&quot;}}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">         # &quot;123&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;2222222222&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{extract_from_comments &quot;Version ([\\\\d.]+)&quot;}}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">     # &quot;2.1.0&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;3333333333&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{extract_from_comments &quot;Deploy to (\\\\w+)&quot;}}&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      # &quot;production&quot;</span></span></code></pre></div><h2 id="real-world-example" tabindex="-1">Real-World Example <a class="header-anchor" href="#real-world-example" aria-label="Permalink to &quot;Real-World Example&quot;">​</a></h2><p>Firebase Test Lab adds build comments:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">rules</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  - </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">when</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pull_request</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labeled</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">build_created</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    then</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      update_fields</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # QA Status → &quot;QA Requested&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;1202880331736132&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1202888299403896&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Build Type → &quot;Test&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;1203158031514948&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1203211562684746&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Status → &quot;In Review&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;1202887490284881&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1202887490288021&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # Test Version # → extracted + &quot;(firebase)&quot; appended</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &#39;1210535494227756&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{extract_from_comments &quot;Build completed with Version (.+)&quot;}} (firebase)&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">      post_pr_comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ✅ Updated Asana task with build information</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        Build: {{extract_from_comments &quot;Build completed with Version (.+)&quot;}}</span></span></code></pre></div><h2 id="common-issues" tabindex="-1">Common Issues <a class="header-anchor" href="#common-issues" aria-label="Permalink to &quot;Common Issues&quot;">​</a></h2><h3 id="pattern-not-matching" tabindex="-1">Pattern Not Matching <a class="header-anchor" href="#pattern-not-matching" aria-label="Permalink to &quot;Pattern Not Matching&quot;">​</a></h3><p><strong>Problem:</strong> Regex doesn&#39;t match comment format</p><p><strong>Solution:</strong> Test regex at <a href="https://regex101.com/" target="_blank" rel="noreferrer">regex101.com</a>:</p><ol><li>Select &quot;JavaScript&quot; flavor</li><li>Paste your pattern (single backslashes)</li><li>Test against comment text</li><li>Double backslashes for YAML</li></ol><h3 id="empty-field-values" tabindex="-1">Empty Field Values <a class="header-anchor" href="#empty-field-values" aria-label="Permalink to &quot;Empty Field Values&quot;">​</a></h3><p><strong>Problem:</strong> Extraction returns empty string</p><p><strong>Solution:</strong> Check:</p><ul><li>Pattern syntax (capture groups)</li><li>Comment actually contains expected text</li><li>Use <code>or</code> helper for fallback:<div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;1234567890&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;{{or (extract_from_comments &quot;Pattern&quot;) &quot;Not Found&quot;}}&#39;</span></span></code></pre></div></li></ul><h3 id="workflow-not-triggering" tabindex="-1">Workflow Not Triggering <a class="header-anchor" href="#workflow-not-triggering" aria-label="Permalink to &quot;Workflow Not Triggering&quot;">​</a></h3><p><strong>Problem:</strong> Workflow types don&#39;t include <code>labeled</code></p><p><strong>Solution:</strong></p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">on</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  pull_request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">    types</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">labeled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ← Must include labeled</span></span></code></pre></div><h3 id="label-name-mismatch" tabindex="-1">Label Name Mismatch <a class="header-anchor" href="#label-name-mismatch" aria-label="Permalink to &quot;Label Name Mismatch&quot;">​</a></h3><p><strong>Problem:</strong> Label in workflow doesn&#39;t match actual label</p><p><strong>Solution:</strong> Check exact label name (case-sensitive):</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># GitHub label: &quot;build_created&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">build_created</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ✅ Exact match</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">label</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Build_Created</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # ❌ Wrong case</span></span></code></pre></div><h3 id="comments-not-available" tabindex="-1">Comments Not Available <a class="header-anchor" href="#comments-not-available" aria-label="Permalink to &quot;Comments Not Available&quot;">​</a></h3><p><strong>Problem:</strong> Comments not fetched</p><p><strong>Solution:</strong> This shouldn&#39;t happen - <code>extract_from_comments</code> automatically triggers fetching. Check that the helper is actually being used in your rules.</p><h2 id="testing-your-patterns" tabindex="-1">Testing Your Patterns <a class="header-anchor" href="#testing-your-patterns" aria-label="Permalink to &quot;Testing Your Patterns&quot;">​</a></h2><p>Debug extraction in PR comments:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">post_pr_comment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  Debug Info:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - Raw match: &quot;{{extract_from_comments &quot;Build #(\\\\d+)&quot;}}&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  - With fallback: &quot;{{or (extract_from_comments &quot;Build #(\\\\d+)&quot;) &quot;NOT FOUND&quot;}}&quot;</span></span></code></pre></div><h2 id="multiple-comments" tabindex="-1">Multiple Comments <a class="header-anchor" href="#multiple-comments" aria-label="Permalink to &quot;Multiple Comments&quot;">​</a></h2><p>If multiple comments match, the first capture group from the first match is used:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Comment 1: &quot;Build #100&quot;</span></span>
<span class="line"><span>Comment 2: &quot;Build #200&quot;</span></span></code></pre></div><p>Result: <code>&quot;100&quot;</code> (first match)</p><h2 id="next-steps" tabindex="-1">Next Steps <a class="header-anchor" href="#next-steps" aria-label="Permalink to &quot;Next Steps&quot;">​</a></h2><ul><li><a href="/asana-github-sync/examples/multi-condition-filtering.html">Multi-Condition Filtering</a> - Combine multiple conditions</li><li><a href="/asana-github-sync/reference/helpers/extraction.html#extract_from_comments">extract_from_comments</a> - Complete reference</li><li><a href="/asana-github-sync/reference/conditions/label.html">label Condition</a> - Complete reference</li><li><a href="/asana-github-sync/reference/context-variables.html#comments">Context Variables</a> - Comments variable</li></ul>`,74)])])}const u=a(n,[["render",l]]);export{c as __pageData,u as default};
