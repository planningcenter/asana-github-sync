name: Asana Issue Sync (Dry Run)

on:
  issues:
    types: [opened]

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v6

      - name: Create Asana Task from Issue
        uses: ./
        with:
          asana_token: ${{ secrets.ASANA_TOKEN }}
          github_token: ${{ github.token }}
          dry_run: true
          rules: |
            rules:
              - when:
                  event: issues
                  action: opened
                  has_asana_tasks: false
                then:
                  create_task:
                    project: '1234567890123456'
                    workspace: '9876543210987654'
                    title: 'GH Issue #{{issue.number}}: {{issue.title}}'
                    notes: |
                      {{issue.body}}

                      ---
                      Reported by: @{{issue.author}}
                      GitHub Issue: {{issue.url}}
